---
// Hero Carousel component with image backgrounds and content slides
import ArrowLeftIcon from "../icons/ArrowLeft.astro";
import ArrowRightIcon from "../icons/ArrowRight.astro";
import { type Slide } from "../../lib/components/hero-carousel";

const slides: Slide[] = [
    {
        image: "/images/carousel/carousel-01.jpg",
        title: "PROFESIONÁLNA SPRÁVA BYTOVÝCH DOMOV",
        description:
            "Komplexný výkon správy bytových domov a nebytových priestorov. Viac ako 21 rokov skúseností v oblasti správy bytov.",
    },
    {
        image: "/images/carousel/carousel-02.jpg",
        title: "TECHNICKÁ A EKONOMICKÁ SPRÁVA",
        description:
            "Zabezpečenie opráv a údržby, vedenie účtovníctva, evidencia úhrad, vymáhanie nedoplatkov a spravovanie fondu prevádzky a údržby.",
    },
    {
        image: "/images/carousel/carousel-03.jpg",
        title: "SPRAVUJEME 45 BYTOVÝCH DOMOV",
        description:
            "V súčasnosti zabezpečujeme správu pre 43 bytových domov, 1 rodinný dom a 1 polyfunkčný dom s celkovým počtom viac ako 1740 bytov.",
    },
    {
        image: "/images/carousel/carousel-04.jpg",
        title: "SPOKOJNOSŤ NAŠICH KLIENTOV NA PRVOM MIESTE",
        description:
            "Prvoradým cieľom našej práce je spokojnosť všetkých našich klientov. Zabezpečujeme kvalitné služby a výhodné podmienky.",
    },
];
---

<section
    class="h-95 md:h-[60vh] lg:h-[70vh] max-h-175 relative overflow-hidden hero-carousel"
>
    <div class="relative h-full carousel-container">
        <div class="relative h-full slides-wrapper">
            {
                slides.map((slide, index) => (
                    <div
                        class:list={[
                            "absolute inset-0 transition-opacity duration-1000 ease-in-out slide group",
                            index === 0 ? "opacity-100 active" : "opacity-0",
                        ]}
                        data-slide={index}
                    >
                        <img
                            src={slide.image}
                            alt={slide.title}
                            class="w-full h-full object-cover block transition-transform duration-[10s] ease-linear group-[.active]:scale-110"
                            loading="lazy"
                        />
                        <div class="absolute inset-0 bg-linear-to-b from-black/60 via-black/20 to-black/70" />
                        <div class="absolute inset-0 flex flex-col justify-center items-center text-white text-center px-4 md:px-16 lg:px-32">
                            <h1 class="m-0 mb-4 font-extrabold tracking-tight leading-tight text-3xl md:text-5xl lg:text-6xl drop-shadow-lg translate-y-8 opacity-0 transition-all duration-700 ease-out group-[.active]:translate-y-0 group-[.active]:opacity-100 delay-100">
                                {slide.title}
                            </h1>
                            <p class="m-0 mb-8 max-w-3xl text-base md:text-lg lg:text-xl text-gray-100 drop-shadow-md translate-y-8 opacity-0 transition-all duration-700 ease-out group-[.active]:translate-y-0 group-[.active]:opacity-100 delay-300">
                                {slide.description}
                            </p>
                            <div class="translate-y-8 opacity-0 transition-all duration-700 ease-out group-[.active]:translate-y-0 group-[.active]:opacity-100 delay-500">
                                <a
                                    href="/about"
                                    class="inline-flex items-center justify-center gap-2 px-6 md:px-8 py-3 md:py-4 rounded-full bg-primary text-white no-underline font-bold text-sm md:text-base tracking-wide transition-all duration-300 shadow-[0_6px_20px_rgba(15,98,254,0.35)] hover:bg-[#0b53d6] hover:shadow-[0_8px_25px_rgba(15,98,254,0.45)] hover:-translate-y-1 active:scale-95"
                                >
                                    <span>Dozvedieť sa viac</span>
                                    <ArrowRightIcon width={16} height={16} fill="currentColor" />
                                </a>
                            </div>
                        </div>
                    </div>
                ))
            }
        </div>

        <div
            class="absolute inset-0 flex items-center justify-between pointer-events-none px-4 z-20"
        >
            <button
                class="carousel-btn pointer-events-auto bg-black/45 text-white border-none w-11 h-11 rounded-full inline-flex items-center justify-center cursor-pointer transition-colors duration-200 hover:bg-black/60 prev"
                aria-label="Predchádzajúci slide"
            >
                <ArrowLeftIcon width={20} height={20} fill="currentColor" />
            </button>
            <button
                class="carousel-btn pointer-events-auto bg-black/45 text-white border-none w-11 h-11 rounded-full inline-flex items-center justify-center cursor-pointer transition-colors duration-200 hover:bg-black/60 next"
                aria-label="Nasledujúci slide"
            >
                <ArrowRightIcon width={20} height={20} fill="currentColor" />
            </button>
        </div>

        <div
            class="absolute left-1/2 bottom-4.5 -translate-x-1/2 flex gap-1.5 z-20"
        >
            {
                slides.map((_, index) => (
                    <button
                        class="w-2 h-2 rounded-full border-none cursor-pointer dot bg-white/65 aria-current:bg-white transition-colors duration-300"
                        data-slide={index}
                        aria-label={`Slide ${index + 1}`}
                        aria-current={index === 0 ? "true" : "false"}
                    />
                ))
            }
        </div>

        <div
            class="absolute left-0 right-0 bottom-0 h-0.75 bg-linear-to-r from-[#67a8ff] to-primary opacity-90 w-0 transition-[width] duration-200 linear carousel-progress-bar"
            role="progressbar"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
        >
        </div>
    </div>
</section>

<style>
    /* We keep only the classes that need to be toggled by JS but hard to do purely with classes */
    .slide.active {
        opacity: 1 !important;
    }
</style>

<script>
    import { initHeroCarousel } from "../../lib/components/hero-carousel";
    initHeroCarousel();
</script>
