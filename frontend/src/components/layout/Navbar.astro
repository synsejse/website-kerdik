---
// Navbar component with navigation links
---

<nav class="bg-[#1f2937] shadow-lg min-h-16 relative">
    <div
        class="max-w-300 mx-auto px-4 flex justify-between lg:justify-start items-center min-h-16"
    >
        <ul
            id="primary-navigation"
            class="hidden lg:flex list-none m-0 p-0 gap-2 items-center
            lg:static lg:opacity-100 lg:pointer-events-auto
            max-lg:absolute max-lg:top-full max-lg:left-0 max-lg:right-0 max-lg:bg-[#1f2937] max-lg:flex-col max-lg:gap-0 max-lg:p-0 max-lg:border-t max-lg:border-white/15 max-lg:opacity-0 max-lg:pointer-events-none max-lg:transition-opacity max-lg:duration-300 max-lg:shadow-lg max-lg:z-50 [&.active]:flex! [&.active]:opacity-100! [&.active]:pointer-events-auto!"
            aria-hidden="true"
        >
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    Úvod
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/about"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    O nás
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/offer"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    Ponuka
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/references"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    Referencie
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/news"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    Aktuálne
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/documents"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    Dokumenty
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
            <li
                class="nav-item w-full lg:w-auto max-lg:border-b max-lg:border-white/10"
            >
                <a
                    href="/contact"
                    class="block py-4 px-5 text-[#f9fafb] no-underline font-medium text-[0.9375rem] relative transition-all duration-300 hover:text-[#60a5fa] hover:bg-white/5 group"
                >
                    Kontakt
                    <span
                        class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.75 bg-[#60a5fa] transition-all duration-300 group-hover:w-[80%]"
                    ></span>
                </a>
            </li>
        </ul>

        <button
            class="mobile-menu-toggle lg:hidden flex flex-col bg-none border-none cursor-pointer gap-1 justify-center items-center h-16 px-3 group"
            type="button"
            aria-label="Toggle menu"
            aria-expanded="false"
            aria-controls="primary-navigation"
            aria-haspopup="true"
        >
            <span
                class="hamburger block w-6 h-0.5 bg-[#f9fafb] transition-all duration-300 group-aria-expanded:rotate-45 group-aria-expanded:translate-y-1.5"
            ></span>
            <span
                class="hamburger block w-6 h-0.5 bg-[#f9fafb] transition-all duration-300 group-aria-expanded:opacity-0"
            ></span>
            <span
                class="hamburger block w-6 h-0.5 bg-[#f9fafb] transition-all duration-300 group-aria-expanded:-rotate-45 group-aria-expanded:-translate-y-1.5"
            ></span>
        </button>
    </div>
</nav>

<script>
    const menuToggle = document.querySelector(".mobile-menu-toggle");
    const navMenu = document.getElementById("primary-navigation");

    function setMenu(open: boolean) {
        if (!menuToggle || !navMenu) return;
        menuToggle.setAttribute("aria-expanded", String(open));
        // Force flex display when active
        if (open) {
            navMenu.classList.add("active");
            navMenu.setAttribute("aria-hidden", "false");
        } else {
            navMenu.classList.remove("active");
            navMenu.setAttribute("aria-hidden", "true");
        }
    }

    function isOpen() {
        return menuToggle?.getAttribute("aria-expanded") === "true";
    }

    menuToggle?.addEventListener("click", (e) => {
        e.stopPropagation();
        setMenu(!isOpen());
    });

    // Close menu when clicking a link
    navMenu?.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => setMenu(false));
    });

    // Close on outside click
    document.addEventListener("click", (e) => {
        if (!menuToggle || !navMenu) return;
        const target = e.target as Node;
        if (!navMenu.contains(target) && !menuToggle.contains(target)) {
            setMenu(false);
        }
    });

    // Close on Escape
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
            setMenu(false);
        }
    });

    // Close on resize to desktop/tablet breakpoint
    window.addEventListener("resize", () => {
        if (window.innerWidth >= 1024) {
            setMenu(false);
        }
    });
</script>
