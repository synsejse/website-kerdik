---
// Navbar component with navigation links
---

<nav class="navbar">
    <div class="navbar-container">
        <ul id="primary-navigation" class="nav-menu" aria-hidden="true">
            <li class="nav-item">
                <a href="/" class="nav-link">Úvod</a>
            </li>
            <li class="nav-item">
                <a href="/about" class="nav-link">O nás</a>
            </li>
            <li class="nav-item">
                <a href="/offer" class="nav-link">Ponuka</a>
            </li>
            <li class="nav-item">
                <a href="/references" class="nav-link">Referencie</a>
            </li>
            <li class="nav-item">
                <a href="/news" class="nav-link">Aktuálne</a>
            </li>
            <li class="nav-item">
                <a href="/documents" class="nav-link">Dokumenty</a>
            </li>
            <li class="nav-item">
                <a href="/contact" class="nav-link">Kontakt</a>
            </li>
        </ul>

        <button
                class="mobile-menu-toggle"
                type="button"
                aria-label="Toggle menu"
                aria-expanded="false"
                aria-controls="primary-navigation"
                aria-haspopup="true"
        >
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        </button>
    </div>
</nav>

<style>
    .navbar {
        background-color: #1f2937;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        min-height: 64px;
    }

    .navbar-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        min-height: 64px;
    }

    .nav-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 0.5rem;
    }

    /* .nav-item rule removed – no positioning needed */

    .nav-link {
        display: block;
        padding: 1rem 1.25rem;
        color: #f9fafb;
        text-decoration: none;
        font-weight: 500;
        font-size: 0.9375rem;
        position: relative;
        transition:
                color 0.3s ease,
                background-color 0.3s ease;
    }

    .nav-link:hover {
        color: #60a5fa;
        background-color: rgba(255, 255, 255, 0.05);
    }

    .nav-link::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 3px;
        background-color: #60a5fa;
        transition: width 0.3s ease;
    }

    .nav-link:hover::after {
        width: 80%;
    }

    .mobile-menu-toggle {
        display: none;
        flex-direction: column;
        background: none;
        border: none;
        cursor: pointer;
        gap: 0.25rem;
        justify-content: center;
        align-items: center;
        height: 64px;
        padding: 0 0.75rem;
    }

    .hamburger {
        display: block;
        width: 1.5rem;
        height: 2px;
        background-color: #f9fafb;
        transition:
                transform 0.3s ease,
                opacity 0.3s ease,
                background-color 0.3s ease;
    }
    .mobile-menu-toggle[aria-expanded="true"] .hamburger:nth-child(1) {
        transform: rotate(45deg) translate(4px, 5px);
    }
    .mobile-menu-toggle[aria-expanded="true"] .hamburger:nth-child(2) {
        opacity: 0;
    }
    .mobile-menu-toggle[aria-expanded="true"] .hamburger:nth-child(3) {
        transform: rotate(-45deg) translate(4px, -5px);
    }

    @media (max-width: 1024px) {
        .nav-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #1f2937;
            flex-direction: column;
            gap: 0;
            padding: 0.5rem 0;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            max-height: 0;
            opacity: 0;
            pointer-events: none;
            overflow: hidden;
            transition:
                    max-height 0.3s ease,
                    opacity 0.3s ease;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
            will-change: max-height, opacity;
        }

        .nav-menu.active {
            max-height: 26rem;
            opacity: 1;
            pointer-events: auto;
        }

        .nav-item {
            width: 100%;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-link {
            padding: 1.25rem 1.75rem;
            line-height: 1.2;
        }

        .nav-link::after {
            display: none;
        }

        .mobile-menu-toggle {
            display: flex;
        }

        .navbar-container {
            position: relative;
        }
    }
</style>

<script>
    const menuToggle = document.querySelector(".mobile-menu-toggle");
    const navMenu = document.getElementById("primary-navigation");

    function setMenu(open) {
        if (!menuToggle || !navMenu) return;
        menuToggle.setAttribute("aria-expanded", String(open));
        navMenu.classList.toggle("active", open);
        navMenu.setAttribute("aria-hidden", String(!open));
    }

    function isOpen() {
        return menuToggle?.getAttribute("aria-expanded") === "true";
    }

    menuToggle?.addEventListener("click", (e) => {
        e.stopPropagation();
        setMenu(!isOpen());
    });

    // Close menu when clicking a link
    navMenu?.querySelectorAll(".nav-link").forEach((link) => {
        link.addEventListener("click", () => setMenu(false));
    });

    // Close on outside click
    document.addEventListener("click", (e) => {
        if (!menuToggle || !navMenu) return;
        const target = e.target;
        if (!navMenu.contains(target) && !menuToggle.contains(target)) {
            setMenu(false);
        }
    });

    // Close on Escape
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
            setMenu(false);
        }
    });

    // Close on resize to desktop/tablet breakpoint
    window.addEventListener("resize", () => {
        if (window.innerWidth >= 1024) {
            setMenu(false);
        }
    });
</script>